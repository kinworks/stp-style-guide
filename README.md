stp-style-guide
===============
###_An SCSS Style Guide for Scotland's Towns Partnership_

**Author**: Kin ([http://kin.works](http://kin.works))

This Style Guide is based on [Jeremy Keith's](https://adactio.com/) [Pattern Primer](https://github.com/adactio/Pattern-Primer).

## View online
You can view the Style Guide at [http://style.stp.kin.works](http://style.stp.kin.works)

## Changelog
### v1.1

_With thanks to Andy at Storm ID for his feedback!_

- Introduced a 'layout cap' max-width for sites - found just before the block layout section of the guide. The SCSS file for this (01-layout-cap.scss) also details anywhere in v1.0 that styles need to be amended to fit this new 80em max width;
- Headings and CTAs can be placed directly on the grey background, if that suits your layout: use the .outside class detailed in 01-blocks.scss on a container around the object. For an example, see the 'Release' H1 at the top of the styleguide. Note that .outside only covers width alignment, and vertical margin will still be handled by the element within the .outside container;
- Added max-width of 34em to .text and p in _5.1-typography.scss for sensible line length capping;
- Changed the sass-globbing syntax in global.scss to the also-Windows-friendly patterns/\*.\*
- Removed the --sourcemap argument from our recommended SASS compilation command / alias, as sourcemaps are generated by default in SASS 3.4 and later;

## Testing Coverage
The guideline list of functional and compliant browsers from the STP tender is as follows:

- MS Internet Explorer 8 and above: Compliant
- MS Internet Explorer 6 & 7: Functional
- Google Chrome (Latest Version, Windows): Compliant
- Mozilla Firefox (Latest Version, Windows): Compliant
- Safari 7, OS X: Compliant
- Google Chrome (Latest Version, OS X): Compliant
- Mozilla Firefox (Latest Version, OS X): Compliant
- Mobile Safari on iOS 8.x: Compliant
- Google Chrome on iOS 8.x: Compliant
- Mobile Safari on iOS 7.x: Compliant
- Google Chrome on iOS 7.x: Compliant
- Mobile Safari on iOS 6.x: Compliant
- Mobile Safari on iOS 5.x: Functional
- Google Chrome on Android 4.x: Compliant
- 'Browser' on Android 4.x: Compliant
- 'Browser' on Android 2.3.x: Functional
- Internet Explorer (10) on Windows Phone 8.x: Functional
- BlackBerry Browser on Blackberry OS 7.x: Functional

The Style Guide components and patterns have been tested as functional / compliant as appropriate across these browsers, making it a pragmatic baseline to develop web projects for STP from.


## Known Bugs

- Buttons: IE9: &lt;button&gt; or &lt;input&gt; elements with .cta set on them have a brightly coloured border-bottom rather than a darker shade as a pseudo-shadow. This seems to be due to a [bug in IE9](http://stackoverflow.com/questions/11165061/ie9-input-button-element-border-color-issue). 

- Guide: Responsive Tables pattern: It appears that the responsive table pattern seems broken in the guide in certain browsers, however the pattern itself is fine and it's simply the fact that the mobile view is shown in an iframe that causes the bug.


## Working on this repo

### Pull Requests

We welcome pull requests, however allowing PRs on this repository is not a guarantee that they will be accepted. Feel free to open issues for discussion prior to filing a PR.

### Requirements

You'll need the following tools:

- PHP 5.x or later;
- [Ruby](https://www.ruby-lang.org/en/documentation/) 2.x or later;
	- Ruby Gem: [Sass](https://rubygems.org/gems/sass) 3.3 or later;
	- Ruby Gem: [Sass-globbing](https://rubygems.org/gems/sass-globbing) 1.1 or later.
	
### SCSS Compilation

We tend to alias a [Sass watch](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#using_sass) command in ```~/.bash_profile``` for ease of use; this is quite different for a style guide as we don't want a minified output, and we require the ```sass-globbing``` plugin (see 'Requirements') to just find all our .scss files and import them for use in the guide without having to specify every single one.

#### Compilation Command

```sass --watch -r sass-globbing --style expanded css/sass:css/output```

#### As a bash alias

```alias stylewatch='sass --watch -r sass-globbing --style expanded css/sass:css/output'```

_Don't forget to [source your bash_profile again](http://stackoverflow.com/questions/4608187/how-to-reload-bash-profile-from-the-command-line) after editing it, or the alias won't work._

## Merge drivers for Git: committing compiled SCSS

It may seem strange that the repo contains the compiled SCSS, however this is for easy deployment and CI. To ensure the generated CSS from the remote doesn't clash with your local copy when pulling, run the following commands in your local repo to tell Git to use the merge driver 'keepRemote' included in the repo and referenced from css/output/.gitattributes when pulling:

```git config merge.keepRemote.name "Always prefer remote files for this folder"```

```git config merge.keepRemote.driver "sh keepRemote.sh %O %A %B"```
